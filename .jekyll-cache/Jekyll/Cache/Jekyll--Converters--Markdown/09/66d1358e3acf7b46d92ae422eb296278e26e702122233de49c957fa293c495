I"<p>The ghorr staff completed a successful Gentoo installation on 10 August 2013 utilizing the following guide.  For further reference, check out the official <a href="https://wiki.gentoo.org/wiki/Handbook:AMD64/Full/Installation" target="_blank">Gentoo documentation</a>.</p>

<hr />

<p><img src="../../img/linux/gblend-150x150.png" alt="" style="float: left;margin-right: 7px;margin-top: 7px;" /></p>

<h4 id="gentoo-installation">Gentoo Installation</h4>

<p></p>
<h5 id="prior-to-installation"><em>Prior to installation</em></h5>

<p>Go to <a href="https://www.gentoo.org/downloads" target="_blank">https://www.gentoo.org/downloads</a> and download the latest install-amd64-minimal iso</p>

<p>Prepare a bootable drive for the ISO (use dd command, UNetbootin, or drivedroid for Android)</p>

<p>Boot the device</p>

<p>Select your keyboard layout (41 for US)</p>

<h5 id="beginning-the-installation"><em>Beginning the installation</em></h5>

<p>Check for a working network connection (e.g. ping google.com)</p>

<p>If you have no working network connection, try using the net-setup command to start the desired network interface</p>

<p><code>net-setup eth0</code></p>

<p>Disk partitioning</p>

<p>Determine your desired installation device using the fdisk command (e.g. /dev/sda)
fdisk -l</p>

<p>You may use cfdisk or fdisk to partition your drives; whatever your are more comfortable with is applicable. I chose to partition using cfdisk.
cfdisk /dev/sda</p>

<p>Create the desired number of partitions for your drive. If you wish to do encryption, ensure you have a separate boot and root partition.</p>

<p>Create filesystems for all of the partitions you just created. e.g.
mkfs.ext4 /dev/sda1</p>

<p>If you feel you need a swap, ensure you added a swap partition using cfdisk. After adding the swap partition, use the mkswap command to properly initialize the swap. e.g.
mkswap /dev/sda2</p>

<p>Start the swap
swapon /dev/sda2</p>

<p>Now we must begin mounting our partitions for the installation (first mount your root partition; then mount any other partitions you may have created).
mount /dev/sda1 /mnt/gentoo</p>

<p>Ensure it has a proper filesystem structrure; you should see a lost+found folder
ls /mnt/gentoo</p>

<p>If needed create directories for any additional partitions to be mounted using the mkdir command; then mount those partitions using the mount command as previously mentioned.</p>

<p>Configure Date / Download tarball</p>

<p>Before we start the installation, ensure the system date is set properly using the date command. UTC time is desired.
date</p>

<p>If the date were not correct, you can issue the following command to set it to a given time and date (e.g. 10 August 2013 at 21:00 would be entered as below).
date 81721002013</p>

<p>Change directory to the root partition that you just mounted
cd /mnt/gentoo</p>

<p>We will be using the Links CLI browser to download the stage 3 tarball
links http://gentoo.org/main/en/mirrors.xml</p>

<p>Select a nearby mirror (e.g. Argonne National Laboratory). Click the mirror ‚Üí Click releases ‚Üí Click amd64 ‚Üí Click current-stage3 ‚Üí Click default ‚Üí Click the most current date ‚Üí Select the latest stage3-amd64 tar.bz2 file to download</p>

<p>Exit Links with q</p>

<p>Extract / Configure Flags</p>

<p>Extract the downloaded package to your root partition (e.g. /mnt/gentoo)
tar -xjpf stage3-amd64*</p>

<p>Now we need to install the portage package manager
links http://gentoo.org/main/en/mirrors.xml</p>

<p>Select a nearby mirror (e.g. Argonne National Laboratory). Click the mirror ‚Üí Click snapshots ‚Üí Click amd64 ‚Üí Scroll down and select the file portage-latest.tar.bz2 to download</p>

<p>Extract the downloaded package to your root partition (e.g. /mnt/gentoo), and copy it to the usr/ directory
tar -xvjf portage-latest.tar.bz2 -C usr/</p>

<p>Once portage is done unpacking, the next step is to set the gcc compiler flags
nano /etc/portage/make.conf</p>

<p>Visit the gentoo gcc optimization guide for more information. In this example we will use the -march=native option for CFLAGS
CFLAGS=‚Äù-march=native -02 -pipe‚Äù</p>

<p>Set MAKEOPTS to one more that the number of processing cores you have (e.g. for a dual core processor)
MAKEOPTS=‚Äù-j3‚Äù</p>

<p>Chroot</p>

<p>It is almost time to chroot into the new gentoo environment, but we first need to copy the DNS information over.
cp -L /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</p>

<p>Now we need to mount some of the necessary filesystems
mount -t proc none /mnt/gentoo/proc
mount -rbind /sys /mnt/gentoo/sys
mount -rbind /dev /mnt/gentoo/dev</p>

<p>Now we can chroot into the new environment
chroot . /bin/bash</p>

<p>Run the command env-update</p>

<p>Run source /etc/profile</p>

<p>Update the PS1 so you can identify that you are in the chrooted environment
export PS1=‚Äú(chroot) $PS1‚Äù</p>

<p>Update the portage tree using the following command
emerge ‚Äìsync</p>

<p>Profile / Timezone</p>

<p>Select the profile; the building block for a gentoo system. It has values for the USE and CFLAGS variables. You will use the following command to view all the available profiles.
eselect profile list</p>

<p>Pick your desired environment (e.g. gnome users would select 4)
eselect profile set 4</p>

<p>Make sure the desired profile was properly set
eselect profile list</p>

<p>Now lets set the USE variable in the make.conf file
nano /etc/portage/make.conf</p>

<p>For a gnome setup, set the USE variable as follows (for a full listing of the available USE flags please see the gentoo handbook here.
USE=‚Äú$USE alsa dvd gnome gtk pulseaudio -kde‚Äù</p>

<p>Now we will set the timezone; determine your desired timezone
ls /usr/share/zoneinfo</p>

<p>Copy the desired timezone file (e.g. US Central) to /etc/localtime
cp /usr/share/zoneinfo/US/Central /etc/localtime</p>

<p>Echo whatever file you selected into the /etc/timezone file
echo ‚ÄúUS/Central‚Äù &gt; /etc/timezone</p>

<p>Kernel</p>

<p>Now we need to download the kernel source code
emerge gentoo-sources</p>

<p>Next you have a couple of options to choose from, one is configuring the kernel manually, another option which is much easier and simpler is to simply emerge genkernel. I will be utilizing the later option due to time constraints.
emerge genkernel</p>

<p>Once genkernel is done installing, run the following command to compile the sources for your system.
genkernel all</p>

<p>The generated files will be in /boot after genkernel finishes compiling. You will have a kernel file and an initrd
ls /boot/kernel*
ls /boot/initramfs*</p>

<p>Now we need to configure the kernel modules. For this we will use the find command.  This command will need to be changed corresponding to the version of gentoo downloaded.
find /lib/modules/3.5.7-gentoo/ -type f -iname ‚Äò<em>.o‚Äô -or -iname ‚Äò</em>.ko‚Äô | less</p>

<p>Keep note of the ones you will need for the next step :smiley:</p>
:ET